<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Star Polygon</title>
    <script src="https://cdn.jsdelivr.net/npm/kong-util/dist/all.js"></script>
    <style>
        .container {
            border: 1px solid #888;
            display: inline-block;
            text-align: center;
            padding: .5rem;
        }
        canvas {
            width: 192px;
            height: 192px;
            border: 1px solid blue;
            display: block;
        }
    </style>
</head>
<body>
    <main></main>
    <script>
const canvasSize = 192;
const radius = 90;
const primeList = [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71];
kongUtil.use();
(async()=> {
    for (let poly = 7; ; ++poly) {
        for (let primeIndex = 0; primeIndex < primeList.length; ++primeIndex) {
            const prime = primeList[primeIndex];
            if (prime >= poly / 2) break;
            if (poly % prime === 0) continue;
            const container = createElementFromJsonML(
                ['div', {class: 'container'},
                    ['span', `{${poly}/${prime}}`],
                    ['canvas', {width: canvasSize, height: canvasSize}]
                ]
            );
            $('main').append(container);
            console.debug(`{${poly}/${prime}}`);

            const canvas = container.lastChild;
            const ctx = canvas.getContext('2d');
            ctx.lineWidth = 1;
            // ctx.translate(0.5, 0.5);

            let verticeIndex = 0;
            ctx.moveTo(canvasSize / 2, canvasSize / 2 + radius);
            for (let i = 0; i < poly; ++i) {
                verticeIndex = (verticeIndex + prime) % poly;
                console.debug(verticeIndex);
                const angle = 2 * Math.PI * verticeIndex / poly;
                const x = radius * Math.sin(angle) + canvasSize / 2;
                const y = radius * Math.cos(angle) + canvasSize / 2;
                ctx.lineTo(x, y);
                ctx.stroke();
                await wait(100);
            }
        }
    }
})();
    </script>
</body>
</html>
