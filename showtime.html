<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <title>Show Time</title>
    <script type="text/javascript">
        const zeroFill = function(num, length) {
            if(typeof length != "number") length = 2;
            num = num.toString();
            while(num.length < length) num = "0" + num;
            return num;
        };

        window.addEventListener("load", function() {
            const dayText = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];
            const ed = document.getElementById("date");
            const et = document.getElementById("time");

            const ds = window.location.search.match(/[\?&]decisecond=([^&]+)/);
            const style = window.location.search.match(/[\?&]style=([^&]+)/);
            if(style) document.body.setAttribute("style", style[1]);

            const showTime = function() {
                const d = new Date();
                ed.innerHTML = d.getFullYear()
                    + "/" + zeroFill(d.getMonth() + 1)
                    + "/" + zeroFill(d.getDate())
                    + " (" + dayText[d.getDay()] + ")"
                ;
                et.innerHTML = d.toTimeString().split(" ")[0];
                if(ds) et.innerHTML += "." + parseInt(d.getMilliseconds() / 100);

                if(style) return;

                const diff = 127;
                var rgb = [255, 255, 255];

                rgb[0] = 255 - parseInt(diff * d.getMonth() / 11);
                rgb[1] = 255 - parseInt(diff * (d.getDate() - 1) / 30);
                rgb[2] = 255 - parseInt(diff * d.getDay() / 6);
                ed.style.color = "rgb(" + rgb.join(",") +")";

                rgb[0] = 255 - parseInt(diff * d.getHours() / 23);
                rgb[1] = 255 - parseInt(diff * d.getMinutes() / 59);
                rgb[2] = 255 - parseInt(diff * d.getSeconds() / 59);
                et.style.color = "rgb(" + rgb.join(",") +")";
            };
            const adjustFontSize = function() {
                const width = window.innerWidth;
                ed.style.fontSize = parseInt(width / 12) + "px";
                et.style.fontSize = parseInt((width - 100) / 6) + "px";
                ed.style.marginTop = (window.innerHeight - width / 4) / 2 + "px";
            }

            window.addEventListener("resize", adjustFontSize);
            adjustFontSize();

            window.timer = setInterval(showTime, 100);
            document.body.removeChild(document.getElementById("loading"));
            showTime();
        });
    </script>
    <style type="text/css">
        body {
            text-align: center;
            font-family: "Courier New", "Courier", monospace;
            background-color: #000;
            color: #fff;
            overflow: hidden;
        }
    </style>
</head>
<body>
    <div id="loading">Loading...</div>
    <div id="date"></div>
    <div id="time"></div>
</body>
</html>
